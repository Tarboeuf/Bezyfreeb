<Window x:Class="BezyFB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:bezyFb="clr-namespace:BezyFB"
        xmlns:helpers="clr-namespace:BezyFB.Helpers"
        xmlns:api="clr-namespace:T411.Api;assembly=T411Client"
        Title="MainWindow" Height="450" Width="925"
        Closed="MainWindow_OnClosed">
    <Window.Resources>
        <helpers:SizeMoConverter x:Key="SizeConverter" />
    </Window.Resources>
    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
            <Button Content="Charger la liste des non vus" Click="Button_Click" Margin="5" />
            <Button Content="Configuration" Click="Configuration_Click" Margin="5" />
            <Button Content="Telecharger tout" Click="Download_All_Click" Margin="5" />
            <CheckBox Content="Réseau Local" Name="cbLocalNetwork" Margin="5" IsChecked="False" />
        </StackPanel>
        <StatusBar  Name="tb" DockPanel.Dock="Bottom" />
        <TabControl SelectionChanged="Selector_OnSelectionChanged" Name="tc">
            <TabItem>
                <TabItem.Header>Series</TabItem.Header>
                <TreeView Name="tv" DockPanel.Dock="Bottom">
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate DataType="bezyFb:rootShowsShow" ItemsSource="{Binding unseen}">
                            <HierarchicalDataTemplate.ItemTemplate>
                                <HierarchicalDataTemplate DataType="bezyFb:Episode">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding user[0].downloaded}" ToolTip="{Binding description}" VerticalAlignment="Center" Margin="5 0" />
                                        <Button Click="DlTout" CommandParameter="{Binding .}" Margin="5 1">
                                            <TextBlock Foreground="Gray" FontWeight="Bold" FontSize="10" FontFamily="Britannic Bold">ALL</TextBlock>
                                        </Button>
                                        <TextBlock Text="{Binding code}" ToolTip="{Binding description}" VerticalAlignment="Center" Margin="5 0" />
                                        <TextBlock Text="{Binding title}" ToolTip="{Binding id}" VerticalAlignment="Center" />
                                        <TextBlock Margin="5 0 0 0" Text="(" Foreground="Gray" VerticalAlignment="Center" />
                                        <TextBlock Text="{Binding date}" Foreground="Gray" VerticalAlignment="Center" />
                                        <TextBlock Text=")" Foreground="Gray" VerticalAlignment="Center" />
                                        <Button Click="DlStClick" CommandParameter="{Binding .}" Margin="5 1">
                                            <TextBlock Foreground="Gray" FontWeight="Bold" FontSize="10" FontFamily="Britannic Bold">SRT</TextBlock>
                                        </Button>
                                        <Button Click="GetMagnetClick" CommandParameter="{Binding .}" Margin="5 1">
                                            <Image Source="Image/magnet.png" Width="16" Height="16" />
                                        </Button>
                                        <Button Click="SetDl" CommandParameter="{Binding .}" Margin="5 1">
                                            <TextBlock Foreground="Gray" FontWeight="Bold" FontSize="10" FontFamily="Britannic Bold">DL</TextBlock>
                                        </Button>
                                        <Button Click="SetSetSeen" CommandParameter="{Binding .}" Margin="5 1">
                                            <Image Source="Image/eye.png" Width="16" Height="16" />
                                        </Button>
                                    </StackPanel>
                                </HierarchicalDataTemplate>
                            </HierarchicalDataTemplate.ItemTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Button Click="SettingsClick" CommandParameter="{Binding .}" Margin="5 1">
                                    <Image Source="Image/settings.png" Width="16" Height="16" />
                                </Button>
                                <TextBlock Text="{Binding title}" ToolTip="{Binding id}" />
                                <TextBlock Margin="5 0 0 0" Text="(" Foreground="Gray" />
                                <TextBlock Text="{Binding ATelecharger}" Foreground="Gray" />
                                <TextBlock Text="/" Foreground="Gray" />
                                <TextBlock Text="{Binding remaining}" Foreground="Gray" />
                                <TextBlock Text=")" Foreground="Gray" />
                            </StackPanel>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </TabItem>
            <TabItem Header="T411">
                <ListView Name="lv">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Nom" DisplayMemberBinding="{Binding Name}" />
                            <GridViewColumn Header="Taille"  DisplayMemberBinding="{Binding Size, Converter={StaticResource SizeConverter}}" />
                            <GridViewColumn Header="Seeders"  DisplayMemberBinding="{Binding Seeders}" />
                            <GridViewColumn Header="NbDL" DisplayMemberBinding="{Binding Times_completed}"  />
                            <GridViewColumn Header="DL">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate DataType="api:Torrent">
                                        <Button Content="x" Tag="{Binding .}" Click="ButtonTelechargerTorrent_OnClick"></Button>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>